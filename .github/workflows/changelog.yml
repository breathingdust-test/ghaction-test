on:
  pull_request:
    types: [closed]
name: Add changelog notes
jobs:
  ParseChangelog:
    if: github.event.pull_request.merged
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - run: |
          git fetch --prune --unshallow --tags
          export previoustag="$(git describe --abbrev=0 --match='v*.*.*' --tags)"
          echo ::set-output name=previous-release-sha::"$(git rev-list -n 1 $previoustag)"
        id: get-previous-release-sha
      - run: echo ${{ steps.get-previous-release-sha.outputs.previous-release-sha }}
